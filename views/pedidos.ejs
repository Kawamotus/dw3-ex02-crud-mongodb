<%- include('partials/header.ejs') %> 
<%- include('partials/navbar.ejs') %> 

<div class='container'>
    <br>
    <div class="card">
        <div class="card-header">
            <h1>Cadastro de Pedidos:</h1>
        </div>
        <div class="card-body">
            <form action="/pedidos/novoPedido" method="post">
                <label for="">Nome do Cliente:</label>
                <input type="text" name="nome" id="nome" class="form-control" required><br>
                <label for="">N° do Pedido:</label>
                <input type="number" name="numPedido" id="numPedido" class="form-control" required><br>
                <label for="">Produto:</label>
                <input type="text" name="produto" id="produto" class="form-control" required><br>
                <label for="">Quantidade:</label>
                <input type="number" name="quantidade" id="quantidade" class="form-control" required><br>
                <label for="">Preço Unitário:</label>
                <input type="text" name="precoUnitario" id="precoUnitario" class="form-control"><br>
                <button class="btn btn-primary">Cadastrar</button>
            </form>
        </div>
    </div>
    <br>
    <h2 class="text-center">Pedidos recentes</h2><br>
        <table class="table table-hover">
            <thead>
            <tr class="bg-success">
                <th scope="col">#</th>
                <th scope="col">Nome</th>
                <th scope="col">N° Pedido</th>
                <th scope="col">Produto</th>
                <th scope="col">Quantidade</th>
                <th scope="col">Preço Unitário</th>
                <th scope="col">Total</th>
                <th scope="col">Ações</th>
            </tr>
            </thead>
            <tbody>
            <% let i = 1 %>
            <% pedidos.forEach(pedido =>{ %>
            <tr>
                <th scope="row"><%= i %></th>
                <td><%= pedido.nome %></td>
                <td><%= pedido.numPedido %></td>
                <td><%= pedido.produto %></td>
                <td><%= pedido.quantidade %></td>
                <td>R$<%= pedido.precoUnitario %></td>
                <% total = pedido.quantidade * pedido.precoUnitario %>
                <td>R$<%= total %></td>
                <td>
                    <a href="/pedidos/excluir/<%=pedido._id%>" class="btn btn-danger" onclick="return confirm('Deseja realmente excluir o pedido de <%=pedido.nome %>?')">Excluir</a>
                    <a href="#" class="btn btn-info">Editar</a>
                </td> 
            </tr>
            <% i++; %>
            <% }) %>
            </tbody>
        </table>
        
        </div>
<br><br><br><br><br><br>

<%- include('partials/footer.ejs') %> 